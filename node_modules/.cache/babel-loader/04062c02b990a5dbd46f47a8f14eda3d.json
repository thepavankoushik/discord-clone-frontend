{"ast":null,"code":"import store from\"../../store/store\";import{setMessages}from\"../../store/actions/chatActions\";export var updateDirectChatHistoryIfActive=function updateDirectChatHistoryIfActive(data){var _store$getState$chat$;var participants=data.participants,messages=data.messages;// find id of user from token and id from active conversation\nvar receiverId=(_store$getState$chat$=store.getState().chat.chosenChatDetails)===null||_store$getState$chat$===void 0?void 0:_store$getState$chat$.id;var userId=store.getState().auth.userDetails._id;if(receiverId&&userId){var usersInCoversation=[receiverId,userId];updateChatHistoryIfSameConversationActive({participants:participants,usersInCoversation:usersInCoversation,messages:messages});}};var updateChatHistoryIfSameConversationActive=function updateChatHistoryIfSameConversationActive(_ref){var participants=_ref.participants,usersInCoversation=_ref.usersInCoversation,messages=_ref.messages;var result=participants.every(function(participantId){return usersInCoversation.includes(participantId);});if(result){store.dispatch(setMessages(messages));}};","map":{"version":3,"names":["store","setMessages","updateDirectChatHistoryIfActive","data","participants","messages","receiverId","getState","chat","chosenChatDetails","id","userId","auth","userDetails","_id","usersInCoversation","updateChatHistoryIfSameConversationActive","result","every","participantId","includes","dispatch"],"sources":["/Users/pavankoushik/Downloads/mern-discord-clone/frontend/src/shared/utils/chat.js"],"sourcesContent":["import store from \"../../store/store\";\nimport { setMessages } from \"../../store/actions/chatActions\";\n\nexport const updateDirectChatHistoryIfActive = (data) => {\n  const { participants, messages } = data;\n\n  // find id of user from token and id from active conversation\n  const receiverId = store.getState().chat.chosenChatDetails?.id;\n  const userId = store.getState().auth.userDetails._id;\n\n  if (receiverId && userId) {\n    const usersInCoversation = [receiverId, userId];\n\n    updateChatHistoryIfSameConversationActive({\n      participants,\n      usersInCoversation,\n      messages,\n    });\n  }\n};\n\nconst updateChatHistoryIfSameConversationActive = ({\n  participants,\n  usersInCoversation,\n  messages,\n}) => {\n  const result = participants.every(function (participantId) {\n    return usersInCoversation.includes(participantId);\n  });\n\n  if (result) {\n    store.dispatch(setMessages(messages));\n  }\n};\n"],"mappings":"AAAA,MAAOA,MAAK,KAAM,mBAAmB,CACrC,OAASC,WAAW,KAAQ,iCAAiC,CAE7D,MAAO,IAAMC,gCAA+B,CAAG,QAAlCA,gCAA+B,CAAIC,IAAI,CAAK,2BACvD,GAAQC,aAAY,CAAeD,IAAI,CAA/BC,YAAY,CAAEC,QAAQ,CAAKF,IAAI,CAAjBE,QAAQ,CAE9B;AACA,GAAMC,WAAU,wBAAGN,KAAK,CAACO,QAAQ,EAAE,CAACC,IAAI,CAACC,iBAAiB,gDAAvC,sBAAyCC,EAAE,CAC9D,GAAMC,OAAM,CAAGX,KAAK,CAACO,QAAQ,EAAE,CAACK,IAAI,CAACC,WAAW,CAACC,GAAG,CAEpD,GAAIR,UAAU,EAAIK,MAAM,CAAE,CACxB,GAAMI,mBAAkB,CAAG,CAACT,UAAU,CAAEK,MAAM,CAAC,CAE/CK,yCAAyC,CAAC,CACxCZ,YAAY,CAAZA,YAAY,CACZW,kBAAkB,CAAlBA,kBAAkB,CAClBV,QAAQ,CAARA,QACF,CAAC,CAAC,CACJ,CACF,CAAC,CAED,GAAMW,0CAAyC,CAAG,QAA5CA,0CAAyC,MAIzC,IAHJZ,aAAY,MAAZA,YAAY,CACZW,kBAAkB,MAAlBA,kBAAkB,CAClBV,QAAQ,MAARA,QAAQ,CAER,GAAMY,OAAM,CAAGb,YAAY,CAACc,KAAK,CAAC,SAAUC,aAAa,CAAE,CACzD,MAAOJ,mBAAkB,CAACK,QAAQ,CAACD,aAAa,CAAC,CACnD,CAAC,CAAC,CAEF,GAAIF,MAAM,CAAE,CACVjB,KAAK,CAACqB,QAAQ,CAACpB,WAAW,CAACI,QAAQ,CAAC,CAAC,CACvC,CACF,CAAC"},"metadata":{},"sourceType":"module"}