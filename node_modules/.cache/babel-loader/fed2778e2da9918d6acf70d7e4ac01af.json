{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pavankoushik/Downloads/mern-discord-clone/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pavankoushik/Downloads/mern-discord-clone/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import*as api from\"../../api\";import{openAlertMessage}from\"./alertActions\";export var authActions={SET_USER_DETAILS:\"AUTH.SET_USER_DETAILS\"};export var getActions=function getActions(dispatch){return{login:function login(userDetails,history){return dispatch(_login(userDetails,history));},register:function register(userDetails,history){return dispatch(_register(userDetails,history));},setUserDetails:function setUserDetails(userDetails){return dispatch(_setUserDetails(userDetails));}};};var _setUserDetails=function _setUserDetails(userDetails){return{type:authActions.SET_USER_DETAILS,userDetails:userDetails};};var _login=function _login(userDetails,history){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response,_response$exception,_response$exception$r,_response$data,_userDetails;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.login(userDetails);case 2:response=_context.sent;if(response.error){dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception=response.exception)===null||_response$exception===void 0?void 0:(_response$exception$r=_response$exception.response)===null||_response$exception$r===void 0?void 0:_response$exception$r.data));}else{_response$data=response===null||response===void 0?void 0:response.data,_userDetails=_response$data.userDetails;localStorage.setItem(\"user\",JSON.stringify(_userDetails));dispatch(_setUserDetails(_userDetails));history.push(\"/dashboard\");}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};var _register=function _register(userDetails,history){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response,_response$exception2,_response$exception2$,_response$data2,_userDetails2;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.register(userDetails);case 2:response=_context2.sent;console.log(response);if(response.error){dispatch(openAlertMessage(response===null||response===void 0?void 0:(_response$exception2=response.exception)===null||_response$exception2===void 0?void 0:(_response$exception2$=_response$exception2.response)===null||_response$exception2$===void 0?void 0:_response$exception2$.data));}else{_response$data2=response===null||response===void 0?void 0:response.data,_userDetails2=_response$data2.userDetails;localStorage.setItem(\"user\",JSON.stringify(_userDetails2));dispatch(_setUserDetails(_userDetails2));history.push(\"/dashboard\");}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"names":["api","openAlertMessage","authActions","SET_USER_DETAILS","getActions","dispatch","login","userDetails","history","register","setUserDetails","type","response","error","exception","data","localStorage","setItem","JSON","stringify","push","console","log"],"sources":["/Users/pavankoushik/Downloads/mern-discord-clone/frontend/src/store/actions/authActions.js"],"sourcesContent":["import * as api from \"../../api\";\nimport { openAlertMessage } from \"./alertActions\";\n\nexport const authActions = {\n  SET_USER_DETAILS: \"AUTH.SET_USER_DETAILS\",\n};\n\nexport const getActions = (dispatch) => {\n  return {\n    login: (userDetails, history) => dispatch(login(userDetails, history)),\n    register: (userDetails, history) =>\n      dispatch(register(userDetails, history)),\n    setUserDetails: (userDetails) => dispatch(setUserDetails(userDetails)),\n  };\n};\n\nconst setUserDetails = (userDetails) => {\n  return {\n    type: authActions.SET_USER_DETAILS,\n    userDetails,\n  };\n};\n\nconst login = (userDetails, history) => {\n  return async (dispatch) => {\n    const response = await api.login(userDetails);\n    if (response.error) {\n      dispatch(openAlertMessage(response?.exception?.response?.data));\n    } else {\n      const { userDetails } = response?.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  };\n};\n\nconst register = (userDetails, history) => {\n  return async (dispatch) => {\n    const response = await api.register(userDetails);\n    console.log(response);\n    if (response.error) {\n      dispatch(openAlertMessage(response?.exception?.response?.data));\n    } else {\n      const { userDetails } = response?.data;\n      localStorage.setItem(\"user\", JSON.stringify(userDetails));\n\n      dispatch(setUserDetails(userDetails));\n      history.push(\"/dashboard\");\n    }\n  };\n};\n"],"mappings":"8SAAA,MAAO,GAAKA,IAAG,KAAM,WAAW,CAChC,OAASC,gBAAgB,KAAQ,gBAAgB,CAEjD,MAAO,IAAMC,YAAW,CAAG,CACzBC,gBAAgB,CAAE,uBACpB,CAAC,CAED,MAAO,IAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,QAAQ,CAAK,CACtC,MAAO,CACLC,KAAK,CAAE,eAACC,WAAW,CAAEC,OAAO,QAAKH,SAAQ,CAACC,MAAK,CAACC,WAAW,CAAEC,OAAO,CAAC,CAAC,GACtEC,QAAQ,CAAE,kBAACF,WAAW,CAAEC,OAAO,QAC7BH,SAAQ,CAACI,SAAQ,CAACF,WAAW,CAAEC,OAAO,CAAC,CAAC,GAC1CE,cAAc,CAAE,wBAACH,WAAW,QAAKF,SAAQ,CAACK,eAAc,CAACH,WAAW,CAAC,CAAC,EACxE,CAAC,CACH,CAAC,CAED,GAAMG,gBAAc,CAAG,QAAjBA,gBAAc,CAAIH,WAAW,CAAK,CACtC,MAAO,CACLI,IAAI,CAAET,WAAW,CAACC,gBAAgB,CAClCI,WAAW,CAAXA,WACF,CAAC,CACH,CAAC,CAED,GAAMD,OAAK,CAAG,QAARA,OAAK,CAAIC,WAAW,CAAEC,OAAO,CAAK,CACtC,iGAAO,iBAAOH,QAAQ,6NACGL,IAAG,CAACM,KAAK,CAACC,WAAW,CAAC,QAAvCK,QAAQ,eACd,GAAIA,QAAQ,CAACC,KAAK,CAAE,CAClBR,QAAQ,CAACJ,gBAAgB,CAACW,QAAQ,SAARA,QAAQ,sCAARA,QAAQ,CAAEE,SAAS,qEAAnB,oBAAqBF,QAAQ,gDAA7B,sBAA+BG,IAAI,CAAC,CAAC,CACjE,CAAC,IAAM,gBACmBH,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEG,IAAI,CAA9BR,YAAW,gBAAXA,WAAW,CACnBS,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACZ,YAAW,CAAC,CAAC,CAEzDF,QAAQ,CAACK,eAAc,CAACH,YAAW,CAAC,CAAC,CACrCC,OAAO,CAACY,IAAI,CAAC,YAAY,CAAC,CAC5B,CAAC,sDACF,+DACH,CAAC,CAED,GAAMX,UAAQ,CAAG,QAAXA,UAAQ,CAAIF,WAAW,CAAEC,OAAO,CAAK,CACzC,kGAAO,kBAAOH,QAAQ,qOACGL,IAAG,CAACS,QAAQ,CAACF,WAAW,CAAC,QAA1CK,QAAQ,gBACdS,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CACrB,GAAIA,QAAQ,CAACC,KAAK,CAAE,CAClBR,QAAQ,CAACJ,gBAAgB,CAACW,QAAQ,SAARA,QAAQ,uCAARA,QAAQ,CAAEE,SAAS,sEAAnB,qBAAqBF,QAAQ,gDAA7B,sBAA+BG,IAAI,CAAC,CAAC,CACjE,CAAC,IAAM,iBACmBH,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEG,IAAI,CAA9BR,aAAW,iBAAXA,WAAW,CACnBS,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACZ,aAAW,CAAC,CAAC,CAEzDF,QAAQ,CAACK,eAAc,CAACH,aAAW,CAAC,CAAC,CACrCC,OAAO,CAACY,IAAI,CAAC,YAAY,CAAC,CAC5B,CAAC,wDACF,iEACH,CAAC"},"metadata":{},"sourceType":"module"}