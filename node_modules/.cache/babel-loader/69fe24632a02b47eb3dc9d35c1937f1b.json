{"ast":null,"code":"import _regeneratorRuntime from\"/Users/pavankoushik/Downloads/mern-discord-clone/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/pavankoushik/Downloads/mern-discord-clone/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{logout}from\"./shared/utils/auth\";var apiClient=axios.create({baseURL:\"https://thepavankoushik-discord-back.herokuapp.com/api\",timeout:1000});apiClient.interceptors.request.use(function(config){var userDetails=localStorage.getItem(\"user\");if(userDetails){var token=JSON.parse(userDetails).token;// add token in authrization header\nconfig.headers.Authorization=\"Bearer \".concat(token);}return config;},function(err){return Promise.reject(err);});// public routes so authorization token is not required\nexport var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return apiClient.post(\"/auth/login\",data);case 3:return _context.abrupt(\"return\",_context.sent);case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);return _context.abrupt(\"return\",{error:true,exception:_context.t0});case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function login(_x){return _ref.apply(this,arguments);};}();export var register=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(data){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return apiClient.post(\"/auth/register\",data);case 3:return _context2.abrupt(\"return\",_context2.sent);case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);return _context2.abrupt(\"return\",{error:true,exception:_context2.t0});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function register(_x2){return _ref2.apply(this,arguments);};}();// secure routes(JWT token will be required)\nexport var sendFriendInvitation=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(data){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return apiClient.post(\"/friend-invitation/invite\",data);case 3:return _context3.abrupt(\"return\",_context3.sent);case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);checkResponseCode(_context3.t0);return _context3.abrupt(\"return\",{error:true,exception:_context3.t0});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function sendFriendInvitation(_x3){return _ref3.apply(this,arguments);};}();export var acceptFriendInvitation=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(data){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return apiClient.post(\"/friend-invitation/accept\",data);case 3:return _context4.abrupt(\"return\",_context4.sent);case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);checkResponseCode(_context4.t0);return _context4.abrupt(\"return\",{error:true,exception:_context4.t0});case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function acceptFriendInvitation(_x4){return _ref4.apply(this,arguments);};}();export var rejectFriendInvitation=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(data){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return apiClient.post(\"/friend-invitation/reject\",data);case 3:return _context5.abrupt(\"return\",_context5.sent);case 6:_context5.prev=6;_context5.t0=_context5[\"catch\"](0);checkResponseCode(_context5.t0);return _context5.abrupt(\"return\",{error:true,exception:_context5.t0});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,6]]);}));return function rejectFriendInvitation(_x5){return _ref5.apply(this,arguments);};}();var checkResponseCode=function checkResponseCode(exception){var _exception$response;var responseCode=exception===null||exception===void 0?void 0:(_exception$response=exception.response)===null||_exception$response===void 0?void 0:_exception$response.status;if(responseCode){(responseCode===401||responseCode===403)&&logout();}};","map":{"version":3,"names":["axios","logout","apiClient","create","baseURL","timeout","interceptors","request","use","config","userDetails","localStorage","getItem","token","JSON","parse","headers","Authorization","err","Promise","reject","login","data","post","error","exception","register","sendFriendInvitation","checkResponseCode","acceptFriendInvitation","rejectFriendInvitation","responseCode","response","status"],"sources":["/Users/pavankoushik/Downloads/mern-discord-clone/frontend/src/api.js"],"sourcesContent":["import axios from \"axios\";\nimport { logout } from \"./shared/utils/auth\";\n\nconst apiClient = axios.create({\n  baseURL: \"https://thepavankoushik-discord-back.herokuapp.com/api\",\n  timeout: 1000,\n});\n\napiClient.interceptors.request.use(\n  (config) => {\n    const userDetails = localStorage.getItem(\"user\");\n\n    if (userDetails) {\n      const token = JSON.parse(userDetails).token;\n      // add token in authrization header\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n\n    return config;\n  },\n  (err) => {\n    return Promise.reject(err);\n  }\n);\n\n// public routes so authorization token is not required\n\nexport const login = async (data) => {\n  try {\n    return await apiClient.post(\"/auth/login\", data);\n  } catch (exception) {\n    return {\n      error: true,\n      exception,\n    };\n  }\n};\n\nexport const register = async (data) => {\n  try {\n    return await apiClient.post(\"/auth/register\", data);\n  } catch (exception) {\n    return {\n      error: true,\n      exception,\n    };\n  }\n};\n\n// secure routes(JWT token will be required)\nexport const sendFriendInvitation = async (data) => {\n  try {\n    return await apiClient.post(\"/friend-invitation/invite\", data);\n  } catch (exception) {\n    checkResponseCode(exception);\n    return {\n      error: true,\n      exception,\n    };\n  }\n};\n\nexport const acceptFriendInvitation = async (data) => {\n  try {\n    return await apiClient.post(\"/friend-invitation/accept\", data);\n  } catch (exception) {\n    checkResponseCode(exception);\n    return {\n      error: true,\n      exception,\n    };\n  }\n};\n\nexport const rejectFriendInvitation = async (data) => {\n  try {\n    return await apiClient.post(\"/friend-invitation/reject\", data);\n  } catch (exception) {\n    checkResponseCode(exception);\n    return {\n      error: true,\n      exception,\n    };\n  }\n};\n\nconst checkResponseCode = (exception) => {\n  const responseCode = exception?.response?.status;\n\n  if (responseCode) {\n    (responseCode === 401 || responseCode === 403) && logout();\n  }\n};\n"],"mappings":"8SAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,MAAM,KAAQ,qBAAqB,CAE5C,GAAMC,UAAS,CAAGF,KAAK,CAACG,MAAM,CAAC,CAC7BC,OAAO,CAAE,wDAAwD,CACjEC,OAAO,CAAE,IACX,CAAC,CAAC,CAEFH,SAAS,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAChC,SAACC,MAAM,CAAK,CACV,GAAMC,YAAW,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEhD,GAAIF,WAAW,CAAE,CACf,GAAMG,MAAK,CAAGC,IAAI,CAACC,KAAK,CAACL,WAAW,CAAC,CAACG,KAAK,CAC3C;AACAJ,MAAM,CAACO,OAAO,CAACC,aAAa,kBAAaJ,KAAK,CAAE,CAClD,CAEA,MAAOJ,OAAM,CACf,CAAC,CACD,SAACS,GAAG,CAAK,CACP,MAAOC,QAAO,CAACC,MAAM,CAACF,GAAG,CAAC,CAC5B,CAAC,CACF,CAED;AAEA,MAAO,IAAMG,MAAK,4FAAG,iBAAOC,IAAI,0JAEfpB,UAAS,CAACqB,IAAI,CAAC,aAAa,CAAED,IAAI,CAAC,+IAEzC,CACLE,KAAK,CAAE,IAAI,CACXC,SAAS,YACX,CAAC,qEAEJ,kBATYJ,MAAK,4CASjB,CAED,MAAO,IAAMK,SAAQ,6FAAG,kBAAOJ,IAAI,gKAElBpB,UAAS,CAACqB,IAAI,CAAC,gBAAgB,CAAED,IAAI,CAAC,qJAE5C,CACLE,KAAK,CAAE,IAAI,CACXC,SAAS,aACX,CAAC,uEAEJ,kBATYC,SAAQ,8CASpB,CAED;AACA,MAAO,IAAMC,qBAAoB,6FAAG,kBAAOL,IAAI,gKAE9BpB,UAAS,CAACqB,IAAI,CAAC,2BAA2B,CAAED,IAAI,CAAC,oHAE9DM,iBAAiB,cAAW,CAAC,iCACtB,CACLJ,KAAK,CAAE,IAAI,CACXC,SAAS,aACX,CAAC,wEAEJ,kBAVYE,qBAAoB,8CAUhC,CAED,MAAO,IAAME,uBAAsB,6FAAG,kBAAOP,IAAI,gKAEhCpB,UAAS,CAACqB,IAAI,CAAC,2BAA2B,CAAED,IAAI,CAAC,oHAE9DM,iBAAiB,cAAW,CAAC,iCACtB,CACLJ,KAAK,CAAE,IAAI,CACXC,SAAS,aACX,CAAC,wEAEJ,kBAVYI,uBAAsB,8CAUlC,CAED,MAAO,IAAMC,uBAAsB,6FAAG,kBAAOR,IAAI,gKAEhCpB,UAAS,CAACqB,IAAI,CAAC,2BAA2B,CAAED,IAAI,CAAC,oHAE9DM,iBAAiB,cAAW,CAAC,iCACtB,CACLJ,KAAK,CAAE,IAAI,CACXC,SAAS,aACX,CAAC,wEAEJ,kBAVYK,uBAAsB,8CAUlC,CAED,GAAMF,kBAAiB,CAAG,QAApBA,kBAAiB,CAAIH,SAAS,CAAK,yBACvC,GAAMM,aAAY,CAAGN,SAAS,SAATA,SAAS,sCAATA,SAAS,CAAEO,QAAQ,8CAAnB,oBAAqBC,MAAM,CAEhD,GAAIF,YAAY,CAAE,CAChB,CAACA,YAAY,GAAK,GAAG,EAAIA,YAAY,GAAK,GAAG,GAAK9B,MAAM,EAAE,CAC5D,CACF,CAAC"},"metadata":{},"sourceType":"module"}